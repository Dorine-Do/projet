{% extends 'base.html.twig' %}



{% block stylesheets %}
    <link href="{{asset('build/app.css')}}" rel="stylesheet">
    <link href="{{asset('css/modify_question.css')}}" rel="stylesheet">
{% endblock %}

{% block body %}
    {% set distribute = false %}
    <h1>- Je corrige/modifie ma question -</h1>

{#    Info question#}
    <div class="info_question">
        <p>
            Cette page a pour but de permettre de corriger les possibles fautes orthoqraphiques dans l'intitulé de la
            quesiton ou des réponses.
        </p>
        <p>
            <strong> Attention </strong>, une fois créée et distribuée aux élève, la question ne pourra plus être modifiées ou supprimer.
        </p>

    {% if distribute == false %}
        <p>
            Votre question a déjà été diffusée aux élèves, elle ne peut plus être modifiée.
            <p>
                 - 1ère date de diffusion : <br>
                 - Classe :
            </p>
        </p>
    {% else %}
        <p>
            Votre quesiton n'a pas encore été donné aux élèves, vous pouvez vous la modifier
        </p>
    {% endif %}
    </div>

    {# Form question #}
    <div class="form-question">

        {{ form_start(form) }}
        <table>
            <tr>
                <td colspan="2" class="premier">
                    <p class="partTitle"><span class="numeroform">1</span> Choisir le module:</p>
                </td>
                <td colspan="2" class="premierselect"> {{form_row(form.module, { 'label': false })}}</td>
            </tr>
            <tr>
                <td colspan="2" class="premier">
                    <p class = "partTitle"><span class="numeroform">2</span> Intitulé de la question :</p>
                </td>
                <td colspan="2" class="second">{{form_row(form.wording, { 'label': false })}}</td>
            </tr>
            <tr>
                <td colspan="2" class="premier"><p  class="partTitle"><span class="numeroform">3</span> Difficulté de la question:</p></td>
                <td colspan="2" class="difficulty">

                    {{ form_row(form.difficulty, {'label': false}) }}

                </td>
            </tr>
            <tr>
                <td colspan="2"><p class = "partTitle"><span class="numeroform" >4</span> Réponses</p></td>
                <td colspan="2" class="second">
                    <ul id ="list_proposal">
                        {% for proposal in form.proposal %}
                            <li class="li_proposal">
                                <div class="div_proposal">
                                    {{form_row(proposal.wording)}}
                                    {{form_row(proposal.is_correct)}}
                                </div>
                                {% if distribute == false %}
                                    <button type="button" class="removeProposal" >Suppimer</button>
                                {% endif %}
                            </li>
                        {%endfor%}
                    </ul>
                    {% if distribute == false %}
                        <button
                                data-form='{{ form_widget(form.proposal.vars.prototype) }}'
                                data-index="{{form.proposal|length }}"
                                type="button"
                                id="addProposal"
                                class="addProposal"
                        >
                            Ajouter une réponse
                        </button>
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td colspan="2" class="premier">
                    <p class = "partTitle"><span class="numeroform">5</span> Désactiver la question</p>
                </td>
                <td colspan="2" class="second">
                    {{ form_row(form.enabled) }}
                </td>
            </tr>

            <tr>
                <td colspan="2"><button type="submit" class="valid">Valider</button></td>
            </tr>
        </table>

        {{ form_end(form) }}

    </div>

{% endblock %}
{% block javascripts %}
    {{ encore_entry_script_tags('app') }}
    <script type="text/javascript" src="{{ asset('js/modify_question.js') }}"></script>
{% endblock %}